---

import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
import { Image } from 'astro:assets';
import logoPlaceHolder from '../assets/Logo-placeholder-2.png';
import ThemeChanger from './ThemeChanger.astro';
import Butonbase from './Butonbase.astro';
import { Icon } from 'astro-icon/components';

---

<header>
		<a href="/" class="logo">
			<Image 
				src={logoPlaceHolder} 
				alt="SBP placeholder logo"  
				format='avif'
				quality={"high"}
			/>
		</a>
		<nav aria-label="menu">
			<ul>
				<HeaderLink href="/uslugi">Usługi</HeaderLink>
				|
				<HeaderLink href="/projekty">Projekty</HeaderLink>
				|
				<HeaderLink href="/zespol">Zespół</HeaderLink>
				|
				<HeaderLink href="/do-pobrania">Do pobrania</HeaderLink>
				|
				<HeaderLink href="/sklep">Sklep</HeaderLink>
			</ul>
		</nav>

		

		<div class="contacts">
			<div class="placeholderBTN">
				<ThemeChanger/>
			</div>
			<div class="contacts-box">
				<section class="contact-info" >
					<Icon name="iconPhone" size={24}/> 
					<span id="phone_number">666 666 666</span>
				</section>
				<section class="contact-info" >
					<Icon name="iconMail" size={24}/> 
					<span id="email">testowy@gmail.com</span>
				</section>	
			</div>
			<div class="cta-btn">
				<Butonbase>
					Kontakt
				</Butonbase>
			</div>
		</div>

		
</header>

<div id="snackbar">Skopiowano do schowka!</div>


<script>
	window.addEventListener("scroll",()=>{
		let header = document.querySelector("header");
		header?.classList.toggle("sticky", window.scrollY > 0)
	})
</script>

<style>

	header{
		position: fixed;
		top: 0;
		left: 0;
		width: 100%;
		display: flex;
		justify-content: space-around;
		align-items: center;
		transition: 0.2s;
		z-index: 9999;
		font-size: 1rem;
		background-color: rgba(240, 240, 240, 0.1);
		padding: 0.5em;
	}
	.contacts{
		display: flex;
		flex-direction: row;
		gap: 2.5em;
		font-size: smaller;
		font-weight: 100;
		white-space: nowwrap;
		/* margin-right: 2em; */
		align-items: center;
	}
	.contact-info{
		display: flex;
		flex-direction: row;
		align-items: center;
		letter-spacing: 0.1em;
		gap: 0.5em;
		font-weight: 700;
	}

	.contact-info span{
		cursor: pointer;
	} 

	.cta-btn{
		display: flex;
		align-items: center;
		justify-content: center;
	}
	header.sticky{

		font-size: 0.9rem;
		background-color: rgba(240, 240, 240, 1);
	}
	header .logo {
		position: relative;
		display: flex;
		align-items: center;
		width: 60px;
		height: 30px;
		/* margin-left: 2rem; */
		min-width: 60px;
		object-fit: contain;
	}
	header ul{
		position: relative;
		display: flex;
		justify-content: center;
		align-items: center;
		padding: 0;
		margin:0;
		list-style: none;
	}
	header .placeholderBTN{
	}
	nav{
	}

	#snackbar {
  visibility: hidden; /* Hidden by default. Visible on click */
  min-width: 250px; /* Set a default minimum width */
  margin-left: -125px; /* Divide value of min-width by 2 */
  background-color: #333; /* Black background color */
  color: #fff; /* White text color */
  text-align: center; /* Centered text */
  border-radius: 2px; /* Rounded borders */
  padding: 16px; /* Padding */
  position: fixed; /* Sit on top of the screen */
  z-index: 1; /* Add a z-index if needed */
  left: 50%; /* Center the snackbar */
  bottom: 30px; /* 30px from the bottom */
}
#snackbar.show {
  visibility: visible; /* Show the snackbar */
  /* Add animation: Take 0.5 seconds to fade in and out the snackbar.
  However, delay the fade out process for 2.5 seconds */
  -webkit-animation: fadein 0.5s, fadeout 0.5s 2.5s;
  animation: fadein 0.5s, fadeout 0.5s 2.5s;
}
/* Animations to fade the snackbar in and out */
@-webkit-keyframes fadein {
  from {bottom: 0; opacity: 0;}
  to {bottom: 30px; opacity: 1;}
}

@keyframes fadein {
  from {bottom: 0; opacity: 0;}
  to {bottom: 30px; opacity: 1;}
}

@-webkit-keyframes fadeout {
  from {bottom: 30px; opacity: 1;}
  to {bottom: 0; opacity: 0;}
}

@keyframes fadeout {
  from {bottom: 30px; opacity: 1;}
  to {bottom: 0; opacity: 0;}
}
</style>

<script>
	const phone = document.getElementById("phone_number") ;
	const email = document.getElementById("email") ;
	if (phone != null){
		phone.onclick = function() {
		navigator.clipboard.writeText(phone.innerText)
		showToast()
		}
	}

	if (email != null){
		email.onclick = function() {
		navigator.clipboard.writeText(email.innerText)
		showToast()
		}
	}


	function showToast() {
	// Get the snackbar DIV
	var x = document.getElementById("snackbar");
		if(x != null){
			x.classList.add("show");
			if(x != null){
				// After 3 seconds, remove the show class from DIV
				setTimeout(() => x?.classList.remove("show"), 3000);
			}
		}
	}
</script>